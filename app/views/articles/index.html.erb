<div class="blogger_page">

  <div class="c-blogger_username">
    <%= @blogger.username %>
  </div>

  <% if current_user == @blogger %>

    <input type="checkbox" class="o-toggle" name="new_toggle" id="new_toggle"/>
    <label for="new_toggle" class="c-btn c-btn__new_article">New Article</label>

    <div class="o-article_form">
      <%= form_for [@blogger, @article] do |f| %>
        <div class="">
          <%= f.label :title %>:
          <%= f.text_field :title, class: "c-form__title_field" %>
        </div>
        <div class="">
          What do you want to write your post in:
        </div> 

        <%= f.radio_button :option, "markdown", class: "c-markdown_toggle" %>
        <%= f.label :option, ":Markdown", class: "c-markdown_label" %>
        <br>
        <%= f.radio_button :option, "wysiwyg", class: "c-wysiwyg_toggle" %>
        <%= f.label :option, ":WYSIWYG" %>
        
        <div class="c-form__wysiwyg_editor">
          <%= f.cktext_area :wysiwyg_content, { ckeditor: { toolbar: "custom" } } %>
        </div>

        <%= f.text_area(:content, class: "c-form__markdown_editor") %>

        <label for="new_toggle" class="c-btn c-form__btn c-form__btn--cancel" id="cancel_writing">Cancel</label>
        <%= f.submit "Post", class: "c-btn c-form__btn" %>
      <% end %>
    </div>
    

  <% else %>

    <%= form_for [@blogger, new_subscriber], html: { class: "o-form" } do |f| %>

      <div class="c-form__text">
        Subscribe to receive emails when <%= @blogger.username %> posts a new blog.
      </div>
      <div class="c-form__input">
        <%= f.text_field :email, placeholder: "Email", class: "c-form__field" %>
      </div>
      <%= f.submit "Subscribe", class: "c-btn c-form__btn c-form__btn--subscribe" %>
    <% end %>

  <% end %>

  <% if @articles != [] %>
    
      <% @articles.each do |a| %>
        <%= link_to blogger_article_path(@blogger, a), class: "o-article", id: "id_#{a.id}" do %>
          <div >

            <div class="c-article__title">
              <%= a.title %>
            </div>

            <div class="c-article__content">
              <% if a.wysiwyg? %>
                <%= a.wysiwyg_content.html_safe %>
              <% else %>
                <%= markdown a.content %>
              <% end %>
            </div>

          </div>
        <% end %>
      <% end %>
  
  <% else %>
    No blog posts have been made.
  <%end%>
</div>